server.port=8080
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:sajilokaam}?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=${DB_USER:root}
spring.datasource.password=${DB_PASS:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Flyway (enabled for MySQL 8 in Docker)
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=false
spring.flyway.validateMigrationNaming=false

# CORS is configured in WebCorsConfig.java
# Removed properties-based CORS to avoid conflicts with Java config

# JWT (HS384 requires at least 48 bytes)
jwt.secret=${JWT_SECRET}
jwt.expiration=86400000

# Actuator exposure
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never

# Payment Gateway Configuration
# Khalti Payment Gateway (Sandbox/Test credentials)
khalti.secret.key=test_secret_key_75e8e8a1f97e4cefb9501207b1b45915
khalti.public.key=test_public_key_dc74e0fd57cb46cd93832aee0da39096
khalti.base.url=https://a.khalti.com/api/v2

# eSewa Payment Gateway (UAT/Test credentials)
esewa.merchant.id=EPAYTEST
esewa.secret.key=8gBm/:&EnhH.1/q
esewa.base.url=https://uat.esewa.com.np

# ML Service Configuration
ml.service.url=http://ml-service:5000

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Email Configuration (SMTP) - Optional, will work without credentials (logs to console)
spring.mail.host=${SMTP_HOST:smtp.gmail.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
mail.from.address=${MAIL_FROM_ADDRESS:noreply@sajilokaam.com}
mail.from.name=${MAIL_FROM_NAME:SajiloKaam}
app.frontend.url=${FRONTEND_URL:http://localhost:5173}
